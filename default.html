<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8' />
	<link href='lib//fullcalendar.css' rel='stylesheet' />
	<link href='lib/fullcalendar.print.css' rel='stylesheet' media='print' />
	<script src='lib/moment.min.js'></script>
	<script src='lib/jquery.min.js'></script>
	<script src='lib/fullcalendar.min.js'></script>
	<script>

		$(document).ready(function() {

			$.get('https://api.github.com/repos/bvds/LaitsV3/commits?since=2013-03-01T00:00:00Z.', function(json) {
				console.log(json);
				var colorMap = new Object(); // Author name against the color
				var commitEvents =  [];

				for(i=0;i<json.length;i++){
			
					var date = json[i].commit.author.date;
					var colour = '#'+Math.floor(Math.random()*16777215).toString(16);
					if(colorMap[json[i].commit.author.name])
						colour = colorMap[json[i].commit.author.name];
					else
						colorMap[json[i].commit.author.name]=colour;

					//remove Z
					date= date.slice(0,-1);
					var event = {
						title :"'"+json[i].commit.message+"'",
						start : date,
						color: colour
					};
					commitEvents.push(event);
				}



		$('#calendar').fullCalendar({
			header: {
				left: 'prev,next today',
				center: 'title',
				right: 'month,agendaWeek,agendaDay'
			},
			defaultDate: '2015-03-09',
			editable: true,
			eventLimit: true, // allow "more" link when too many events
			events: commitEvents
		});
		
		});
	});

	</script>
<style>

		body {
			margin: 40px 10px;
			padding: 0;
			font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
			font-size: 14px;
		}
		input{
			font-size: 14px;
		}

</style>
</head>
<body>
	<div style="float:center; width:100%">
		<div style="float:left; width:40%">
			<input type="text" placeholder="Github Username"/>
			<input type="text" placeholder="Repository Name"/>
			<input type="button" value="GitCal" id="#gitcal" class="fc-today-button fc-button fc-state-default fc-corner-left fc-corner-right"/>
		</div>
		<div  style="float:right; width:62%" id='calendar'></div>
	</div>

</body>
</html>
